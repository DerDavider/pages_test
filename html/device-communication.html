<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Thermal Camera SDK: Device Communication</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">DoxygenAwesomeDarkModeToggle.init()</script>
<link rel="icon" href="logoSmall.png" type="image/png" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logoSmall.png"/></td>
  <td id="projectalign">
   <div id="projectname">Thermal Camera SDK<span id="projectnumber">&#160;10.0.1</span>
   </div>
   <div id="projectbrief">SDK for Optris Thermal Cameras</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('device-communication.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Device Communication</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_pages_206__device__communication"></a></p>
<h1><a class="anchor" id="autotoc_md24"></a>
Contents</h1>
<ul>
<li><a class="el" href="#device-communication-overview">Overview</a></li>
<li><a class="el" href="#device-communication-usb">USB</a><ul>
<li><a class="el" href="#device-communication-usb-control">Control</a></li>
<li><a class="el" href="#device-communication-usb-streaming">Streaming</a></li>
</ul>
</li>
<li><a class="el" href="#device-communication-ethernet">Ethernet</a><ul>
<li><a class="el" href="#device-communication-ethernet-control">Control</a></li>
<li><a class="el" href="#device-communication-ethernet-streaming">Streaming</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="device-communication-overview"></a>
Overview</h1>
<p>When connecting to a thermal camera the SDK establishes two separate communication channels:</p>
<ul>
<li><b>Control</b> - a bidirectional channel that the SDK uses to send commands to the device. It is also utilized to retrieve small sized bits of information.</li>
<li><b>Streaming</b> - a unidirectional channel that is used to stream the thermal data from the device to the SDK.</li>
</ul>
<div class="image">
<img src="device_communication.png" alt=""/>
<div class="caption">
Communication channels between the SDK and the thermal camera.</div></div>
    <p>Depending on your chosen connection type, USB or Ethernet, these channels use different protocols/mechanisms to transfer data. In the case of Linux this may also depend on the type of your device.</p>
<p>The data stream from the device is <b>uncompressed</b> for both the USB and Ethernet connections. Please keep this in mind because this poses some demands on your USB and network hardware especially if you are operating multiple devices at once.</p>
<p>Another hardware requirement to be aware of is the <b>power draw</b> of the devices when connected via USB. This is typically not an issue with your average computer or laptop but can pose a limiting factor when working with embedded devices.</p>
<h1><a class="anchor" id="device-communication-usb"></a>
USB</h1>
<h2><a class="anchor" id="device-communication-usb-control"></a>
Control</h2>
<p>The SDK uses the Human Interface Device protocol (HID) to send commands to your device. The HID protocol is, for example, used by input devices like your mouse and keyboard.</p>
<h2><a class="anchor" id="device-communication-usb-streaming"></a>
Streaming</h2>
<p>Once you connect a device to your computer via USB it is recognized by the operating system as a USB camera. You can access its data stream with programs like the VLC media player or guvcview. When you open it as a capture device you will, however, get something like this:</p>
<div class="image">
<img src="pi640_data_stream.jpg" alt=""/>
<div class="caption">
Data stream from a PI640.</div></div>
    <dl class="section note"><dt>Note</dt><dd>On Linux you will not be able to access the data stream of Xi 80, Xi 410(MT) and Xi 1M devices in this way. This is due to the USB transfer mode used by these devices which is not supported by Video for Linux v2 (V4L2) kernel driver.</dd></dl>
<p>There are several important points to note:</p>
<ul>
<li>The raw data needs to be processed by the SDK in order to get useful thermal information. This can then be converted into false color images.</li>
<li>The frame dimensions (width and height) are slightly larger than those specified in the <a class="el" href="features.html#features-supported-cameras">Supported Cameras</a> section in the <a class="el" href="features.html">Features</a> chapter. These additional rows or columns contain the frame metadata that also requires decoding by the SDK.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>You can use the frame dimensions from above to estimate the USB bandwidth required by the device with the chosen video format: <br  />
 <code>bandwidth in bytes per second = (width x height x 2) / framerate</code></dd></dl>
<p>As an alternative, you can take a look at the <a class="el" href="important-files.html#important-files-format-definitions">format definitions file</a>. It is a text file that contains all the available video formats for the different device types. It specifies the output formats <code>Out</code> with their corresponding input formats <code>In</code> as a tuple of in the form of <code>width height framerate</code>.</p>
<p>The devices use two different USB transfer methods to stream the thermal data:</p>
<ul>
<li>The Xi 80, Xi 410(MT) and the Xi 1M use the <b>USB bulk transfer mode</b></li>
<li>while all other devices use the <b>USB isochronous transfer mode</b>.</li>
</ul>
<p>This has no implications on Windows since the used <b>Direct Show</b> layer seamlessly supports both transfer modes. On Linux, however, the default <b>Video for Linux v2</b> (V4L2) kernel driver for such applications just supports isochronous USB data transfer. Because of this the SKD accesses the data stream of the bulk transfer devices through the lower level <b>USB</b> kernel driver instead of <b>V4L2</b>. This is also the reason why you are not able to open their data streams with programs like the VLC player.</p>
<div class="image">
<img src="linux_usb_video_layers.png" alt=""/>
<div class="caption">
Linux video driver hierarchy.</div></div>
    <h1><a class="anchor" id="device-communication-ethernet"></a>
Ethernet</h1>
<p>Before you can use your Ethernet capable device you first have to adjust the on-device configuration to your network environment. Please note, that this configuration can only handle <b>static</b> IP addresses. To set the configuration you need the following pieces of information:</p>
<ul>
<li><b>Device IP address</b> that the device assigns to itself on the network.</li>
<li><b>Destination IP address</b> &amp; <b>destination port</b> as the socket the device sends its data to. This is typically the machine that runs the SDK based application.</li>
<li><b>Subnet mask</b> of the network in which the device and destination machine are located.</li>
</ul>
<p>You can either utilize the tool <a class="el" href="basic-usage.html#basic-usage-command-line-tools-otc-configure-ethernet">otc_configure_ethernet</a> or the <a href="https://optris.com/us/software/pixconnect/">PixConnect</a> to change these on-device settings.</p>
<dl class="section attention"><dt>Attention</dt><dd>Take care when adjusting the on-device network configuration. Make sure the input is correct and you are not using the same IP address multiple times. The only way to correct a completely faulty configuration is to connect the device to your computer via USB and use either the the <a class="el" href="basic-usage.html#basic-usage-command-line-tools-otc-configure-ethernet">otc_configure_ethernet</a> tool or the <a href="https://optris.com/us/software/pixconnect/">PixConnect</a> to rectify it.</dd></dl>
<p>From the perspective of the machine running the SDK the following network connections are established:</p>
<ul>
<li><b>Outgoing TCP</b> connection to <code>&lt;Device IP&gt;:2000</code>.</li>
<li><b>Incoming UDP</b> connection from <code>&lt;Device IP&gt;</code> on the <code>&lt;Destination Port&gt;</code>.</li>
</ul>
<p>Please make sure that any firewall on the machine allows these connections.</p>
<dl class="section note"><dt>Note</dt><dd>On Windows the first connection attempt of a SDK based application to an Ethernet capable device may fail because the Windows firewall initially blocks the communication.</dd></dl>
<h2><a class="anchor" id="device-communication-ethernet-control"></a>
Control</h2>
<p>In order to send commands to your device and to retrieve small bits of information the SDK establishes a TCP to the <b>device IP address</b> specified in the <a class="el" href="important-files.html#important-files-configuration">configuration file</a>. It will always address the port <code>2000</code> on the device. <br  />
</p>
<dl class="section note"><dt>Note</dt><dd>The port <code>2000</code> is required by the firmware and can not be changed by the SDK.</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Avoid establishing Ethernet connections to the same device from multiple clients at the same time. If one client disconnects, the control TCP connection will be closed for all other clients by the firmware. As a result, the SDK can no longer send commands to the device. This impacts, for example, the automatic triggering of flag cycles that ensure the thermal data does not drift over time.</dd></dl>
<h2><a class="anchor" id="device-communication-ethernet-streaming"></a>
Streaming</h2>
<p>Once the device is powered and its firmware is running it tries to locate the configured <b>destination IP address</b>. On success it starts sending the thermal data via UDP datagrams to the set destination socket (<b>destination IP address</b> + <b>destination port</b>). Typically, a thermal frame is comprised out of multiple datagrams that are pieced together by the SDK.</p>
<dl class="section note"><dt>Note</dt><dd>The SDK has no means to influence this behavior nor can it reset the firmware, if it stops to send UDP datagrams.</dd></dl>
<p>As mentioned before the data stream is uncompressed and thus poses some demands on the network hardware. To clarify those Optris released technical notes detailing the <a href="https://optris.com/wp-content/uploads/2025/04/TN_Network-Requirements_2025-03-A.pdf">Network Requirements for Optris Imager in Industrial Applications</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
